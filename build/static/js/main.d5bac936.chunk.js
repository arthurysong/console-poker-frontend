(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,n){},38:function(e,t){e.exports="data:image/png;base64,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"},39:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAABBNJREFUeJzt3TGLHWUYhuFnk1U2IGIpiF0wCCktxFJQEEEsI2hn7S8IViktLWxsZW30X4gYbDTamIAYBLHSFU0Q3LVYG5F9hLyf5xyX64Ipv2/fnZkbpjjDJMCZ9rY9wCIHSe5tewiSJHeSXN72EKtc2PYAsMsEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCASKXXkf5MUkzw/WnyT5edEszFxI8uhwjw+SfLFglnPjRk5v8gc97m9+ZM5wObNreZLk2sanPoNHLCgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQ7C/a55Hh+pMkvw7W78rP3afnYeo4yW87MMPkWibJxczO5R/Zse/FTH//f33zIy/3WObnYXr88J//l5txmNl5uLVqEI9YUAgECoFAIRAoBAKFQKAQCBQCgUIgUAgECoFAIRAoBAKFQKAQCBR7SV5I8vJwn2+H6z9J8tlwj6lXMvuIz3GS7xbN8qAuJnlyuMdhkk8XzDLxUpIrg/UPJXliOMP7Sb5MTl9Wmr6ocx68k9k5+GnzI//D45lfyzc3PvV6VzM/D68mHrGgEggUAoFCIFAIBAqBQCEQKAQChUCgEAgUAoFCIFAIBAqBQCEQKAQChUCgEAgUAoFCIFAIBAqBQCEQKAQChUCgEAgUAoFCIFAIBAqBQCEQKPa3PcAi+0neHe7x7HD9pSTvDfeYurRgj9eTPDNY/2OStxfMsTPOwwd0DjL/Hxxrjtv/cq02wQd0YBMEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUCxn+SjJLeH+xwO13+Y5OPB+t+TvDacgTV+WbDHW0meG6w/yvx+uDlc/zcnw+P6ymH43zvM7H66tWoQj1hQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoNhftM9Xw/V7Sa4O1h8n+Xo4A2s8nOSp4R5Hmd1T3wz//s65kdnv/+9vfmTOcDnz94OubXzqM3jEgkIgUAgECoFAIRAoBAKFQKAQCBQCgUIgUAgECoFAIRAoBAKFQKDY2/YAf3k6yZXB+otJ3lg0CzNHOf0o08TNJN8vmGVsVwKZOkhyb9tDkCS5k9OXps4Fj1hQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoFj1AZ1tO07y+baHIElyd9sDABvyJ0M2nRz/9KusAAAAAElFTkSuQmCC"},48:function(e,t,n){e.exports=n(78)},53:function(e,t,n){},73:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),s=n.n(o),c=(n(53),n(2)),l=n(3),i=n(4),u=n(5);function m(e,t){var n=window.location.pathname;console.log(e,n),!e||"/"!==n&&"/login"!==n&&"/register"!==n?e||"/rooms"!==n&&"/"!==n&&!/^\/{1}rooms\/{1}.+$/.test(n)&&!/^\/{1}users\/{1}.+$/.test(n)||t.push("/login"):t.push("/rooms")}var p=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setLogin(this.props.history);var t=this.props.history;t.listen((function(n,r){"PUSH"===r?n.pathname===e.currentPathname&&n.search===e.currentSearch||(e.currentPathname=n.pathname,e.currentSearch=n.search,t.push({pathname:n.pathname,search:n.search})):t.go(1)}))}},{key:"render",value:function(){return a.a.createElement("div",null,console.log(this.props.history.action))}}]),n}(a.a.Component),h=n(47),A=n(20),d=n(21),g=n(23),E=n(22),f=n(38),b=n.n(f),v=n(39),C=n.n(v),y=n(26);function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token");return fetch(e,Object(y.a)(Object(y.a)({},t),{},{headers:Object(y.a)(Object(y.a)({},t.headers),{},{Authorization:"Bearer ".concat(n)})}))}function S(e,t){var n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};O("http://localhost:3001/users/".concat(t,"/make_move"),n)}var I=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={password:""},e.showDialog=function(){document.getElementById("dialog-dark-rounded-".concat(e.props.room.id)).showModal()},e.authenticatePassword=function(){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.state)};O("http://localhost:3001/rooms/".concat(e.props.room.id,"/authenticate"),t).then((function(e){return e.json()})).then((function(t){t.error?document.getElementById("dialog-dark-rounded-alert").showModal():e.props.history.push("/rooms/".concat(e.props.room.id))}))},e.redirect=function(){e.props.history.push("/rooms/".concat(e.props.room.id))},e.renderJoinButton=function(){return e.props.room.has_password?a.a.createElement("button",{onClick:e.showDialog},"join"):e.props.room.no_users<8?a.a.createElement("button",{onClick:e.redirect},"join"):void 0},e.renderLock=function(){if(e.props.room.has_password)return e.props.index%2===0?a.a.createElement("img",{className:"lock_img",src:b.a,alt:"Lock"}):a.a.createElement("img",{className:"lock_img",src:C.a,alt:"Lock2"})},e.handleChange=function(t){e.setState({password:t.target.value})},e}return Object(d.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"nes-container room_container is-rounded ".concat(this.props.index%2===0?"is-dark":"")},console.log(this.props.index),a.a.createElement("li",{className:"room_li"},this.props.room.name,a.a.createElement("br",null),this.renderLock()," ",a.a.createElement("span",{className:"room_li_desc"},this.props.room.no_users,"/8 ",this.renderJoinButton())),a.a.createElement("dialog",{className:"nes-dialog is-dark is-rounded",id:"dialog-dark-rounded-".concat(this.props.room.id)},a.a.createElement("form",{onSubmit:this.authenticatePassword,method:"dialog"},a.a.createElement("p",null,"Please enter password!"),a.a.createElement("menu",{className:"dialog-menu"},a.a.createElement("input",{type:"password",className:"nes-input",name:"password",onChange:this.handleChange,value:this.state.password}),a.a.createElement("button",{type:"submit",className:"nes-btn is-primary"},"Confirm")))),a.a.createElement("dialog",{className:"nes-dialog is-dark is-rounded",id:"dialog-dark-rounded-alert"},a.a.createElement("form",{method:"dialog"},a.a.createElement("p",null,"Invalid Password, Not Authorized."),a.a.createElement("menu",{className:"dialog-menu"},a.a.createElement("button",{className:"nes-btn"},"Okay")))))}}]),n}(a.a.Component),j=n(29),B=n.n(j),k=n(16),Q=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={rooms:[],newForm:!1},e.changeHandler=function(t){e.setState({name:t.target.value})},e.clickHandler=function(){e.props.logOut(e.props.history)},e.renderRooms=function(){return e.state.rooms.map((function(t,n){return a.a.createElement(I,{key:n,index:n,room:t,wsSubscribeRoom:e.props.wsSubscribeRoom,history:e.props.history})}))},e.renderUser=function(){if(e.props.user)return a.a.createElement(a.a.Fragment,null,e.props.user.username," (",e.props.user.chips,")")},e.redirectToDeposits=function(){e.props.history.push("/users/".concat(e.props.user.id,"/deposit"))},e}return Object(d.a)(n,[{key:"handleData",value:function(e){"current_rooms"===e.type?this.setState({rooms:e.rooms}):"new_room"===e.type&&this.setState((function(t){return{rooms:[].concat(Object(h.a)(t.rooms),[e.room])}}))}},{key:"componentDidMount",value:function(){var e=this;this.cable=B.a.createConsumer("ws://127.0.0.1:3001/cable?token=".concat(localStorage.getItem("token"))),this.subscription=this.cable.subscriptions.create({channel:"RoomsListChannel"},{connected:function(){},disconnected:function(){},received:function(t){console.log(t),e.handleData(t)}})}},{key:"componentWillUnmount",value:function(){this.cable.subscriptions.remove(this.subscription)}},{key:"render",value:function(){return a.a.createElement("div",{id:"rooms_component"},this.renderUser(),a.a.createElement("br",null),a.a.createElement("button",{className:"nes-btn smaller-btn is-error",id:"test",onClick:this.clickHandler},"Log Out"),"\xa0",a.a.createElement("button",{className:"nes-btn is-success smaller-btn",onClick:this.redirectToDeposits},"Deposit"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(k.c,{to:"/rooms/new",className:"nes-btn is-primary smaller-btn"},"Create Room"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("ul",{id:"rooms_ul"},this.renderRooms()))}}]),n}(a.a.Component),w=n(28),D=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={name:"",password:""},e.changeHandler=function(t){e.setState(Object(w.a)({},t.target.name,t.target.value))},e.createRoom=function(){var t=JSON.stringify(e.state),n=localStorage.getItem("token"),r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:t};return fetch("http://localhost:3001/rooms",r)},e.submitHandler=function(t){t.preventDefault(),e.createRoom(e.state).then((function(e){return e.json()})).then((function(t){return e.props.history.push("/rooms/".concat(t.id))}))},e.leaveRoom=function(){e.props.history.push("/rooms")},e}return Object(d.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.submitHandler},a.a.createElement("button",{className:"nes-btn is-error",onClick:this.leaveRoom},"<"),"\xa0",a.a.createElement("label",null,"Name\xa0",a.a.createElement("input",{type:"text",name:"name",className:"nes-input",onChange:this.changeHandler,value:this.state.name})),"\xa0",a.a.createElement("label",null,"Password\xa0",a.a.createElement("input",{type:"password",name:"password",className:"nes-input",onChange:this.changeHandler,value:this.state.password})),"\xa0",a.a.createElement("button",{type:"submit",className:"nes-btn is-primary smaller-btn"},"Create")))}}]),n}(a.a.Component);n(58);function H(e,t){var n=function(e,t){for(var n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}(e,t),r=(65280&n)>>8,a=255&n;return"#"+("0"+((16711680&n)>>16).toString(16)).substr(-2)+("0"+r.toString(16)).substr(-2)+("0"+a.toString(16)).substr(-2)}a.a.Component;var T=function(e){return"d"===e[1]||"h"===e[1]?"red":"black"},R=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).styleCards=function(e){var t=e.split(" ");return console.log(t),a.a.createElement(a.a.Fragment,null,t.map((function(e,t){return a.a.createElement("span",{key:t,style:{color:T(e)}},e,"\xa0")})))},e.renderPlayerCards=function(t){return!0===t.playing?t.username!==e.props.user.username&&e.props.round.is_playing?"Xx Xx":e.styleCards(t.cards):"*FOLD*"},e.renderDealerButton=function(e){if(e.dealer)return"(D)"},e.renderPlayers=function(){return a.a.createElement(a.a.Fragment,null,e.props.round.ordered_users.map((function(t,n){return a.a.createElement("li",{className:"board_user",key:n},a.a.createElement("span",{style:{color:"".concat(H(t.username,e.props.colorHash))}},t.username),a.a.createElement("span",{className:"board_user_chips"},"(",t.chips,")"),"\xa0",e.renderPlayerCards(t),e.renderDealerButton(t))})))},e.renderBoardCards=function(){return e.styleCards(e.props.round.access_community_cards)},e.renderCardsAndPot=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"phase"},""===e.props.round.access_community_cards?"<PREFLOP>":e.renderBoardCards()),a.a.createElement("br",null),"Pot ",e.props.round.pot,a.a.createElement("br",null),"Bet ",e.props.round.highest_bet_for_phase,a.a.createElement("br",null))},e}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",null,this.renderPlayers(),a.a.createElement("br",null),this.renderCardsAndPot(),a.a.createElement("br",null)))}}]),n}(a.a.Component),U=n(30),N=n.n(U),P=n(40),F=n.n(P),M=(n(70),function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=Object(o.findDOMNode)(this.refs.jterminal),n=document.getElementById("console"),r=this.props.gameId,a=this.props.userId;F()(window,N.a),this.term=N()(t).terminal([{start:function(){!function(e){O("http://localhost:3001/games/".concat(e,"/start"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}})}(r),n.scrollTop=n.scrollHeight},fold:function(){S({command:"fold"},a),n.scrollTop=n.scrollHeight},check:function(){S({command:"check"},a),n.scrollTop=n.scrollHeight},call:function(){S({command:"call"},a),n.scrollTop=n.scrollHeight},raise:function(e){S({command:"raise",amount:e},a),n.scrollTop=n.scrollHeight},allin:function(){S({command:"allin"},a),n.scrollTop=n.scrollHeight},help:function(){this.echo("Available Commands: fold | check | call | raise <amount> | allin | start"),n.scrollTop=n.scrollHeight}},function(e,t){t.echo("Invalid Command: help for options"),n.scrollTop=n.scrollHeight}],{greetings:"Game Terminal:"}),this.props.status.forEach((function(t){return e.term.echo(t)}))}},{key:"shouldComponentUpdate",value:function(e){var t=this;this.props.roundId!==e.roundId?e.status.forEach((function(e){return t.term.echo(e)})):e.gameErrors&&(this.term.echo(e.gameErrors),this.props.clearGameErrors()),e.status.slice(this.props.status.length).forEach((function(e){return t.term.echo(e)}));var n=document.getElementById("console");return n.scrollTop=n.scrollHeight,!1}},{key:"render",value:function(){return a.a.createElement("div",{id:"console"},a.a.createElement("div",{ref:"jterminal",id:"jterminal"}))}}]),n}(a.a.Component)),_=n(9);var G=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).startGame=function(){e.props.clearGameErrors(),e.props.startGame(e.props.game.id)},e.renderButton=function(){if(!e.props.game.active_round)return console.log(e.props.players>1),a.a.createElement("button",{className:"nes-btn ".concat(e.props.players>1?"is-primary":"is-disabled"),onClick:e.startGame},"Start Game")},e.renderGame=function(){if(e.props.game.active_round&&e.props.user)return console.log(e.props.game),console.log(e.props.game.active_round.status),a.a.createElement(a.a.Fragment,null,a.a.createElement(R,{round:e.props.game.active_round,user:e.props.user,colorHash:e.props.colorHash}),a.a.createElement(M,{gameId:e.props.game.id,user:e.props.user,roundId:e.props.game.active_round.id,playing:e.props.game.active_round.is_playing,status:e.props.game.active_round.status,gameErrors:e.props.gameErrors,clearGameErrors:e.props.clearGameErrors}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.subscribeGame(this.props.gameId)}},{key:"componentWillUnmount",value:function(){this.props.unsubscribeGame(this.props.gameId)}},{key:"render",value:function(){return a.a.createElement("div",{id:"game_container"},this.renderGame(),this.renderButton())}}]),n}(a.a.Component),L=Object(_.b)((function(e){return{game:e.game,user:e.user,gameErrors:e.gameErrors}}),(function(e){return{startGame:function(t){return e((n=t,function(e){O("http://localhost:3001/games/".concat(n,"/start"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"SET_GAME",game:t})}))}));var n},subscribeGame:function(t){return e(function(e){return{channel:"GameChannel",game:"".concat(e)}}(t))},unsubscribeGame:function(t){return e(function(e){return{channel:"GameChannel",game:"".concat(e),leave:!0}}(t))},clearGameErrors:function(){return e({type:"CLEAR_GAME_ERRORS"})}}}))(G);var K=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={newMessage:""},e.hash=Math.floor(1e3+9e3*Math.random()),e.leaveRoom=function(){e.props.history.push("/rooms")},e.renderGameComp=function(){if(e.props.room)return a.a.createElement(L,{gameId:e.props.room.game.id,players:e.props.room.no_users,colorHash:e.hash})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.subscription=this.props.subscribeRoom(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.unsubscribeRoom(this.props.match.params.id)}},{key:"renderRoom",value:function(){var e=this;if(void 0!==this.props.room)return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("button",{className:"nes-btn is-error",onClick:this.leaveRoom},"<"),a.a.createElement("br",null),a.a.createElement("br",null),this.props.room.name),a.a.createElement("ul",{id:"user_list"},this.props.room.users.map((function(t,n){return a.a.createElement("li",{className:"user_item",style:{color:"".concat(H(t.username,e.hash))},key:n},t.username," ")}))))}},{key:"render",value:function(){}}]),n}(a.a.Component),z=Object(_.b)((function(e){return{room:e.room,user:e.user,messages:e.messages}}),(function(e){return{subscribeRoom:function(t){return e(function(e){return{channel:"RoomChannel",room:"".concat(e)}}(t))},unsubscribeRoom:function(t){return e(function(e){return{channel:"RoomChannel",room:"".concat(e),leave:!0}}(t))}}}))(K),x=function(e,t,n){var r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};n({type:"AUTH_REQUEST"}),fetch("http://localhost:3001/authenticate",r).then((function(e){return e.json()})).then((function(e){console.log("in loginUser action",e),e.user?(n({type:"AUTH_SUCCESS",user:e.user}),localStorage.setItem("token",e.auth_token),t.push("/rooms")):e.errors&&(n({type:"AUTH_FAIL"}),n({type:"ADD_ERRORS",errors:e.errors}))}))},Y=n(6),V=n(15),J=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"render",value:function(){return a.a.createElement("div",null,this.props.errors)}}]),n}(a.a.Component),W=Object(_.b)((function(e){return{errors:e.errors}}),(function(e){return{clearErrors:function(){return e((function(e){e({type:"CLEAR_ERRORS"})}))}}}))(J),X=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:""},e.changeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault(),console.log(e.state),e.props.loginUser(e.state,e.props.history)},e.renderRegister=function(){return a.a.createElement(a.a.Fragment,null,"Don't have an account? ",a.a.createElement(k.b,{to:"/register"},"Register!"))},e}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"user_form"},a.a.createElement(W,null),a.a.createElement("form",{onSubmit:this.submitHandler},a.a.createElement("label",null,"Email\xa0",a.a.createElement("input",{className:"nes-input",onChange:this.changeHandler,type:"text",name:"email",value:this.state.email})),a.a.createElement("br",null),a.a.createElement("label",null,"Password\xa0",a.a.createElement("input",{className:"nes-input",onChange:this.changeHandler,type:"password",name:"password",value:this.state.password})),a.a.createElement("br",null),a.a.createElement("button",{className:"nes-btn",type:"submit",value:"login"},"Log In"),a.a.createElement("br",null),this.renderRegister(),a.a.createElement("p",null,"Log In via ",a.a.createElement(k.b,{to:"/auth/google_oauth2"},"Google"))))}}]),n}(a.a.Component),q=Object(_.b)(null,(function(e){return{loginUser:function(t,n){return e(function(e,t){return function(n){x(e,t,n)}}(t,n))}}}))(X),Z=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={username:"",password:"",password_confirmation:"",email:""},e.changeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault(),e.props.register(e.state,e.props.history)},e}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"user_form"},a.a.createElement(W,null),a.a.createElement("form",{onSubmit:this.submitHandler},a.a.createElement("label",null,"Username",a.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.changeHandler})),a.a.createElement("br",null),a.a.createElement("label",null,"Email",a.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.changeHandler})),a.a.createElement("br",null),a.a.createElement("label",null,"Password",a.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.changeHandler})),a.a.createElement("br",null),a.a.createElement("label",null,"Password Confirmation",a.a.createElement("input",{type:"password",name:"password_confirmation",value:this.state.password_confirmation,onChange:this.changeHandler})),a.a.createElement("br",null),a.a.createElement("input",{type:"submit",value:"Create Account"}),a.a.createElement("br",null)))}}]),n}(a.a.Component),$=n(35),ee=n.n($),te=n(42),ne=n(17),re=(n(37),n(73),{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),ae=function(e){var t=Object(ne.useStripe)(),n=Object(ne.useElements)(),r=function(){var r=Object(te.a)(ee.a.mark((function r(a){var o,s,c,l;return ee.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),e.clearMessages(),t&&n){r.next=4;break}return r.abrupt("return");case 4:return o=100*parseFloat(e.amount.replace(/,/g,"")),r.next=7,fetch("http://localhost:3001/secret/".concat(o));case 7:return s=r.sent,r.next=10,s.json();case 10:return c=r.sent,console.log(e.name),r.next=14,t.confirmCardPayment(c.client_secret,{payment_method:{card:n.getElement(ne.CardElement),billing_details:{name:e.name}}});case 14:(l=r.sent).error?(console.log(l.error.message),e.handleErrors(l.error.message)):"succeeded"===l.paymentIntent.status&&(console.log(l.paymentIntent.amount),e.addChips(100*l.paymentIntent.amount,e.user.id),e.handleSuccess(),console.log("PAYMENT SUCCESS"));case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:r},a.a.createElement(ne.CardElement,{options:re}),a.a.createElement("br",null),a.a.createElement("button",{className:"nes-btn ".concat(t&&""!==e.name&&function(e){var t=100*parseFloat(e.replace(/,/g,""));return t>=50||t<=99999999}(e.amount)?"is-primary":"is-disabled"),type:"submit",onClick:r,value:"Exchange Chips!"},"Exchange Chips!")))},oe=n(43),se=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={amount:"",amountError:"",name:"",error:"",success:""},e.changeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.handleAmountChange=function(t){e.setState({amount:t.target.value}),e.validateAmount()},e.validateAmount=function(){var t=100*parseFloat(e.state.amount.replace(/,/g,""));t<50?e.setState({amountError:"Amount must be at least .50"}):t>99999999?e.setState({amountError:"Amount must be no more than 999,999.99"}):e.setState({amountError:null})},e.renderUser=function(){if(e.props.user)return a.a.createElement(a.a.Fragment,null,e.props.user.username," (",e.props.chips,")")},e.handleErrors=function(t){e.setState({error:t})},e.renderErrors=function(){if(e.state.error)return a.a.createElement("span",{className:"nes-text is-error"},e.state.error,a.a.createElement("br",null))},e.handleSuccess=function(){e.setState({success:"Deposit Successful!"})},e.renderSuccess=function(){if(e.state.success)return a.a.createElement("span",{className:"nes-text is-success"},e.state.success,a.a.createElement("br",null))},e.clearMessages=function(){e.setState({success:"",error:""})},e.goBack=function(){e.props.history.push("/rooms")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchChips()}},{key:"componentWillUnmount",value:function(){this.props.unsetChips()}},{key:"render",value:function(){return a.a.createElement("div",{id:"checkout_form"},a.a.createElement("button",{className:"nes-btn is-error",onClick:this.goBack},"<"),a.a.createElement("br",null),a.a.createElement("br",null),this.renderUser(),a.a.createElement("br",null),a.a.createElement("br",null),this.renderErrors(),this.renderSuccess(),"1 USD = 10000 Chips",a.a.createElement("br",null),a.a.createElement("label",null,a.a.createElement(oe.a,{className:"nes-input ".concat(this.state.amountError?"is-error":""),name:"amount",value:this.state.amount,onChangeEvent:this.handleAmountChange,onBlur:this.validateAmount})),a.a.createElement("br",null),a.a.createElement("div",{className:"nes-text is-error"},this.state.amountError),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("span",{className:"label"},"Full Name *"),a.a.createElement("br",null),a.a.createElement("input",{className:"nes-input",placeholder:"Pacman",type:"text",name:"name",value:this.state.name,onChange:this.changeHandler})),a.a.createElement("br",null),a.a.createElement("label",null,a.a.createElement("span",{className:"label"},"Card Details"),a.a.createElement("br",null),a.a.createElement(ae,{clearMessages:this.clearMessages,handleErrors:this.handleErrors,handleSuccess:this.handleSuccess,amount:this.state.amount,name:this.state.name,user:this.props.user,addChips:this.props.addChips}))))}}]),n}(a.a.Component),ce=Object(_.b)((function(e){return{chips:e.chips}}),(function(e){return{fetchChips:function(t){return e(function(e){return function(t){O("http://localhost:3001/users/".concat(e,"/get_chips")).then((function(e){return e.json()})).then((function(e){console.log(e),t({type:"SET_CHIPS",chips:e.chips})}))}}(t))},addChips:function(t,n){return e(function(e,t){return function(n){var r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({amount:e})};O("http://localhost:3001/users/".concat(t,"/add_chips"),r).then((function(e){return e.json()})).then((function(e){console.log(e),n({type:"SET_CHIPS",chips:e.chips})}))}}(t,n))},unsetChips:function(){return e({type:"UNSET_CHIPS"})}}}))(se),le=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{id:"main"},a.a.createElement(k.a,null,console.log(this.props.user),a.a.createElement(Y.a,{path:"/",render:function(t){return a.a.createElement(p,Object.assign({},t,{isLoggedin:e.props.isLoggedIn,setLogin:e.props.setLogin}))}}),a.a.createElement(Y.c,null,a.a.createElement(Y.a,{path:"/users/:id/deposit",render:function(t){return a.a.createElement(ce,Object.assign({},t,{user:e.props.user}))}}),a.a.createElement(Y.a,{path:"/login",render:function(e){return a.a.createElement(q,e)}}),a.a.createElement(Y.a,{path:"/rooms/new",render:function(e){return a.a.createElement(D,e)}}),a.a.createElement(Y.a,{path:"/rooms/:id",render:function(e){return a.a.createElement(z,e)}}),a.a.createElement(Y.a,{path:"/rooms",render:function(t){return a.a.createElement(Q,Object.assign({},t,{user:e.props.user,logOut:e.props.logOut,isLoggedIn:e.props.isLoggedIn}))}}),a.a.createElement(Y.a,{path:"/register",render:function(t){return a.a.createElement(Z,Object.assign({},t,{register:e.props.register}))}}))))}}]),n}(a.a.Component),ie=Object(_.b)((function(e){return{isLoggedIn:e.isLoggedIn,user:e.user}}),(function(e){return{register:function(t,n){return e(function(e,t){return function(n){var r=JSON.stringify(e);fetch("http://localhost:3001/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:r}).then((function(e){return e.json()})).then((function(r){console.log("in register action ",r),r.user?x(e,t,n):n({type:"ADD_ERRORS",errors:r.errors})}))}}(t,n))},setLogin:function(t){return e(function(e){return function(t){var n=localStorage.getItem("token");console.log("in setlogin"),n?(t({type:"AUTH_REQUEST"}),fetch("http://localhost:3001/set_login",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(n){console.log("in setLogin action",n),n.user?(t({type:"AUTH_SUCCESS",user:n.user}),m(!0,e)):n.error&&(t({type:"AUTH_FAIL"}),m(!1,e))}))):m(!1,e)}}(t))},logOut:function(t){return e(function(e){return function(t){localStorage.clear(),t({type:"LOGOUT"}),e.push("/login")}}(t))}}}))(le),ue=n(25),me=n(44),pe=n(46),he=n(7);var Ae=n(45),de=Object(ue.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{processingAuth:!1,isLoggedIn:!1,user:void 0,errors:[],room:void 0,messages:[],game:{},gameErrors:void 0,chips:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_REQUEST":return Object(he.a)({},e,{processingAuth:!0});case"AUTH_FAIL":return Object(he.a)({},e,{processingAuth:!1,isLoggedIn:!1,user:{}});case"AUTH_SUCCESS":return Object(he.a)({},e,{processingAuth:!1,isLoggedIn:!0,user:t.user});case"LOGOUT":return Object(he.a)({},e,{isLoggedIn:!1,user:{}});case"ADD_ERRORS":return Object(he.a)({},e,{errors:t.errors});case"CLEAR_ERRORS":return Object(he.a)({},e,{errors:[]});case"SET_ROOM":return Object(he.a)({},e,{room:t.room});case"DELETE_ROOM":return Object(he.a)({},e,{room:void 0});case"NEW_MESSAGE":return Object(he.a)({},e,{messages:[].concat(Object(pe.a)(e.messages),[t.message])});case"CLEAR_MESSAGES":return Object(he.a)({},e,{messages:[]});case"SET_GAME":return Object(he.a)({},e,{game:t.game});case"DELETE_GAME":return Object(he.a)({},e,{game:{}});case"UPDATE_ROUND":return console.log(Object(he.a)({},e,{game:Object(he.a)({},e.game,{active_round:t.round})})),Object(he.a)({},e,{game:Object(he.a)({},e.game,{active_round:t.round})});case"GAME_ERRORS":return Object(he.a)({},e,{gameErrors:t.error});case"CLEAR_GAME_ERRORS":return Object(he.a)({},e,{gameErrors:void 0});case"SET_CHIPS":return Object(he.a)({},e,{chips:t.chips});case"UNSET_CHIPS":return Object(he.a)({},e,{chips:void 0});default:return e}}),Object(ue.a)(function(){var e=B.a.createConsumer("ws://127.0.0.1:3001/cable");return function(t){var n=t.dispatch;t.getState;return function(t){return function(r){if("function"===typeof r)return t(r);var a=r.channel,o=r.room,s=r.game,c=r.leave,l=localStorage.getItem("token"),i=Object.assign({},r,{token:l});if(!a)return t(r);if(o){if(c){var u=e.subscriptions.subscriptions.find((function(e){return e.identifier===JSON.stringify({channel:a,room:o,token:l})}));return e.subscriptions.remove(u),n({type:"DELETE_ROOM"}),void n({type:"CLEAR_MESSAGES"})}return e.subscriptions.create(i,{received:function(e){switch(console.log(e),e.type){case"current_room":n({type:"SET_ROOM",room:e.room});break;case"new_message":n({type:"NEW_MESSAGE",message:e.message})}},sendMessage:function(e){this.perform("create_message",{content:e})}})}if(s){if(c){var m=e.subscriptions.subscriptions.find((function(e){return e.identifier===JSON.stringify({channel:a,game:s,token:l})}));return e.subscriptions.remove(m),void n({type:"DELETE_GAME"})}return e.subscriptions.create(i,{received:function(e){switch(console.log(e),e.type){case"set_game":n({type:"SET_GAME",game:e.game});break;case"update_round":n({type:"UPDATE_ROUND",round:e.round});break;case"errors":n({type:"GAME_ERRORS",error:e.error})}}})}}}}}(),me.a)),ge=Object(Ae.a)("pk_test_51GqNn2Kj8jVe4aIu3gu8fP0a3Y8ltGdN66FAP1vq1K2jt3PUvI9STlO8JrGOXAr3DQBx1FRNCZ7Ye5KByzTu7Hmx00LAxaeYGP");window.store=de,s.a.render(a.a.createElement(_.a,{store:de},a.a.createElement(ne.Elements,{stripe:ge},a.a.createElement(ie,null))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.d5bac936.chunk.js.map