{"version":3,"sources":["lock-icon.png","lock-icon-dark.png","redux/handleAuthRedirect.js","components/Home.js","utilities/fetchWithToken.js","components/RoomListItem.js","components/RoomsList.js","components/NewRoomForm.js","utilities/colorHash.js","components/Chatbox.js","utilities/colorCards.js","components/GameBoard.js","components/GameConsole.js","components/Game.js","redux/gameActions.js","components/Room.js","redux/roomActions.js","redux/dispatchActions.js","components/Errors.js","components/LoginForm.js","components/Register.js","components/CheckoutForm.js","components/CheckoutContainer.js","components/App.js","index.js","redux/reducer.js","redux/cableMiddleware.js"],"names":["module","exports","handleAuthRedirect","isLoggedIn","history","curr_url","window","location","pathname","console","log","test","push","Home","this","props","setLogin","listen","newLocation","action","currentPathname","search","currentSearch","go","React","Component","fetchWithToken","url","options","token","localStorage","getItem","fetch","headers","Authorization","postMoveWithToken","commandObj","userId","method","body","JSON","stringify","RoomListItem","state","password","showDialog","document","getElementById","room","id","showModal","authenticatePassword","then","resp","json","error","redirect","renderJoinButton","has_password","onClick","no_users","renderLock","index","className","src","lock","alt","lock2","handleChange","event","setState","target","value","name","onSubmit","type","onChange","RoomsList","rooms","newForm","changeHandler","clickHandler","logOut","renderRooms","map","key","wsSubscribeRoom","renderUser","user","username","chips","redirectToDeposits","data","prevState","cable","Cable","createConsumer","subscription","subscriptions","create","channel","connected","disconnected","received","handleData","remove","to","NewRoomForm","createRoom","submitHandler","preventDefault","leaveRoom","hashStringToColor","str","hash","hash2","i","length","charCodeAt","djb2","g","b","toString","substr","colorCard","card","GameBoard","styleCards","cards","arr","split","c","style","color","renderPlayerCards","playing","round","is_playing","renderDealerButton","dealer","renderPlayers","ordered_users","colorHash","renderBoardCards","access_community_cards","renderCardsAndPot","pot","highest_bet_for_phase","GameConsole","div","findDOMNode","refs","jterminal","scrollable","gameId","terminal","$","term","start","startNewRound","scrollTop","scrollHeight","fold","command","check","call","raise","x","amount","allin","help","echo","cmd","t","greetings","status","forEach","s","nextProps","roundId","gameErrors","clearGameErrors","slice","ref","Game","startGame","game","renderButton","active_round","players","renderGame","subscribeGame","unsubscribeGame","connect","dispatch","roomId","leave","Room","newMessage","Math","floor","random","renderGameComp","subscribeRoom","match","params","unsubscribeRoom","undefined","users","messages","authenticate_user","setItem","auth_token","errors","Errors","clearErrors","LoginForm","email","loginUser","renderRegister","Register","password_confirmation","register","CARD_ELEMENT_OPTIONS","base","fontFamily","fontSmoothing","fontSize","invalid","iconColor","CheckoutForm","stripe","useStripe","elements","useElements","a","clearMessages","cents","parseFloat","replace","secret","confirmCardPayment","client_secret","payment_method","getElement","CardElement","billing_details","result","message","handleErrors","paymentIntent","addChips","handleSuccess","validateAmount","CheckoutContainer","amountError","success","handleAmountChange","renderErrors","renderSuccess","goBack","fetchChips","unsetChips","onChangeEvent","onBlur","placeholder","App","path","render","routerProps","isLoggedin","clear","store","createStore","processingAuth","applyMiddleware","ActionCable","getState","next","identifier","Object","assign","find","sub","sendMessage","perform","content","cableMiddleware","thunk","stripePromise","loadStripe","ReactDOM"],"mappings":"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","file":"static/js/main.d5bac936.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAABBNJREFUeJzt3TGLHWUYhuFnk1U2IGIpiF0wCCktxFJQEEEsI2hn7S8IViktLWxsZW30X4gYbDTamIAYBLHSFU0Q3LVYG5F9hLyf5xyX64Ipv2/fnZkbpjjDJMCZ9rY9wCIHSe5tewiSJHeSXN72EKtc2PYAsMsEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCASKXXkf5MUkzw/WnyT5edEszFxI8uhwjw+SfLFglnPjRk5v8gc97m9+ZM5wObNreZLk2sanPoNHLCgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQ7C/a55Hh+pMkvw7W78rP3afnYeo4yW87MMPkWibJxczO5R/Zse/FTH//f33zIy/3WObnYXr88J//l5txmNl5uLVqEI9YUAgECoFAIRAoBAKFQKAQCBQCgUIgUAgECoFAIRAoBAKFQKAQCBR7SV5I8vJwn2+H6z9J8tlwj6lXMvuIz3GS7xbN8qAuJnlyuMdhkk8XzDLxUpIrg/UPJXliOMP7Sb5MTl9Wmr6ocx68k9k5+GnzI//D45lfyzc3PvV6VzM/D68mHrGgEggUAoFCIFAIBAqBQCEQKAQChUCgEAgUAoFCIFAIBAqBQCEQKAQChUCgEAgUAoFCIFAIBAqBQCEQKAQChUCgEAgUAoFCIFAIBAqBQCEQKPa3PcAi+0neHe7x7HD9pSTvDfeYurRgj9eTPDNY/2OStxfMsTPOwwd0DjL/Hxxrjtv/cq02wQd0YBMEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUCxn+SjJLeH+xwO13+Y5OPB+t+TvDacgTV+WbDHW0meG6w/yvx+uDlc/zcnw+P6ymH43zvM7H66tWoQj1hQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoNhftM9Xw/V7Sa4O1h8n+Xo4A2s8nOSp4R5Hmd1T3wz//s65kdnv/+9vfmTOcDnz94OubXzqM3jEgkIgUAgECoFAIRAoBAKFQKAQCBQCgUIgUAgECoFAIRAoBAKFQKDY2/YAf3k6yZXB+otJ3lg0CzNHOf0o08TNJN8vmGVsVwKZOkhyb9tDkCS5k9OXps4Fj1hQCAQKgUAhECgEAoVAoBAIFAKBQiBQCAQKgUAhECgEAoVAoFj1AZ1tO07y+baHIElyd9sDABvyJ0M2nRz/9KusAAAAAElFTkSuQmCC\"","export default function handleAuthRedirect(isLoggedIn, history){\n    let curr_url = window.location.pathname;\n    console.log(isLoggedIn, curr_url);\n    if (isLoggedIn && (curr_url === \"/\" || curr_url === \"/login\" || curr_url === \"/register\")) { // redirect for setLogin if user is logged in\n        history.push(`/rooms`);\n    } else if (!isLoggedIn && (curr_url === \"/rooms\" || curr_url === \"/\" || /^\\/{1}rooms\\/{1}.+$/.test(curr_url) || /^\\/{1}users\\/{1}.+$/.test(curr_url))) { // redirect for setLogin at rooms url if usuer is not logged in\n        history.push(`/login`)\n    } \n}","import React from 'react';\nimport handleAuthRedirect from '../redux/handleAuthRedirect';\n\nclass Home extends React.Component {\n    componentDidMount(){\n        this.props.setLogin(this.props.history); // can i pass in the history here? and have the action redirect?\n        \n        const { history } = this.props;\n    \n        history.listen((newLocation, action) => {\n            if (action === \"PUSH\") {\n            if (\n                newLocation.pathname !== this.currentPathname ||\n                newLocation.search !== this.currentSearch\n            ) {\n                // Save new location\n                this.currentPathname = newLocation.pathname;\n                this.currentSearch = newLocation.search;\n    \n                // Clone location object and push it to history\n                history.push({\n                pathname: newLocation.pathname,\n                search: newLocation.search\n                });\n            }\n            } else {\n            // Send user back if they try to navigate back\n            history.go(1);\n            }\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                {console.log(this.props.history.action)}\n                {/* {this.refresh()} */}\n                {/* Home Component! */}\n            </div>\n        )\n    }\n\n}\n\nexport default Home","export function fetchWithToken(url, options = {}){\n    const token = localStorage.getItem(\"token\");\n    return fetch(url, {\n        ...options,\n        headers: {\n            ...options.headers,\n            Authorization: `Bearer ${token}`\n        }\n    })\n}\n\nexport function postMoveWithToken(commandObj, userId) {\n    const body = JSON.stringify(commandObj);\n    const options = {\n        method: \"POST\",\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body\n    }\n    fetchWithToken(`http://localhost:3001/users/${userId}/make_move`, options);\n}\n\nexport function startNewRound(gameId) {\n    const options = {\n        method: \"POST\",\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    }\n\n    fetchWithToken(`http://localhost:3001/games/${gameId}/start`, options);\n}","import React from 'react';\nimport lock from '../lock-icon.png';\nimport lock2 from '../lock-icon-dark.png';\nimport { fetchWithToken } from '../utilities/fetchWithToken';\n\nclass RoomListItem extends React.Component {\n    state = {\n        password: \"\"\n    }\n\n    showDialog = () => {\n        // console.log(this.props.room.id);\n        document.getElementById(`dialog-dark-rounded-${this.props.room.id}`).showModal();\n    }\n\n    authenticatePassword = () => {\n        const body = JSON.stringify(this.state);\n        const options = {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body\n        }\n\n        fetchWithToken(`http://localhost:3001/rooms/${this.props.room.id}/authenticate`, options)\n            .then(resp => resp.json())\n            .then(json => {\n                // console.log(json);\n                if (json.error) {\n                    document.getElementById(`dialog-dark-rounded-alert`).showModal();\n                } else {\n                    this.props.history.push(`/rooms/${this.props.room.id}`)\n                }\n            })\n    }\n\n    redirect = () =>  {\n        this.props.history.push(`/rooms/${this.props.room.id}`)\n    }\n\n    renderJoinButton = () => {\n        if (this.props.room.has_password) {\n            return (<button onClick={this.showDialog}>join</button>)\n        }\n        if (this.props.room.no_users < 8){\n            return (<button onClick={this.redirect}>join</button>)\n        }\n    }\n\n    renderLock = () => {\n        if (this.props.room.has_password) {\n            if (this.props.index % 2 === 0) {\n                return (<img className=\"lock_img\" src={lock} alt=\"Lock\" />)\n            }\n            return (<img className=\"lock_img\" src={lock2} alt=\"Lock2\" />)\n        }\n    }\n    \n    handleChange = event => {\n        this.setState({\n            password: event.target.value\n        })\n    }\n\n    render() {\n        return (\n            <div className={`nes-container room_container is-rounded ${this.props.index % 2 === 0 ? 'is-dark' : ''}`}>\n                {console.log(this.props.index)}\n            <li className=\"room_li\">{this.props.room.name}<br/>{this.renderLock()} <span className=\"room_li_desc\">{this.props.room.no_users}/8 {this.renderJoinButton()}</span>\n            </li>\n                <dialog  className=\"nes-dialog is-dark is-rounded\" id={`dialog-dark-rounded-${this.props.room.id}`}>\n                    <form onSubmit={this.authenticatePassword} method=\"dialog\">\n                    {/* <p class=\"title\">Dark dialog</p> */}\n                        <p>Please enter password!</p>\n                        <menu className=\"dialog-menu\">\n                            <input type=\"password\" className=\"nes-input\" name=\"password\" onChange={this.handleChange} value={this.state.password}/>\n                            <button type=\"submit\" className=\"nes-btn is-primary\">Confirm</button>\n                        </menu>\n                    </form>\n                </dialog>\n                <dialog className=\"nes-dialog is-dark is-rounded\" id={`dialog-dark-rounded-alert`}>\n                    <form method=\"dialog\">\n                        <p>Invalid Password, Not Authorized.</p>\n                        <menu className=\"dialog-menu\">\n                            <button className=\"nes-btn\">Okay</button>\n                        </menu>\n                    </form>\n                </dialog>\n            </div>\n        )\n    }\n}\n\nexport default RoomListItem;","import React from 'react';\nimport RoomListItem from './RoomListItem';\nimport Cable from 'actioncable';\nimport { NavLink } from 'react-router-dom';\n\nclass RoomsList extends React.Component {\n    state = {\n        rooms: [],\n        newForm: false\n    }\n\n    //websockets handlers\n    handleData(data){\n        if (data.type === 'current_rooms'){\n            this.setState({\n                rooms: data.rooms\n            })\n        } else if (data.type === 'new_room'){\n            this.setState(prevState => ({\n                rooms: [...prevState.rooms, data.room]\n            }))\n        }\n        \n    }\n\n    // lifecycle hooks\n    componentDidMount(){\n        this.cable = Cable.createConsumer(`ws://127.0.0.1:3001/cable?token=${localStorage.getItem('token')}`);\n\n        this.subscription = this.cable.subscriptions.create({\n            channel: 'RoomsListChannel'\n          }, {\n            connected: () => {},\n            disconnected: () => {},\n            received: (data) => {\n                console.log(data);\n                this.handleData(data);\n            }\n        });\n    }\n\n    componentWillUnmount(){\n        this.cable.subscriptions.remove(this.subscription);\n    }\n    \n    //component handlers\n    changeHandler = event => {\n        this.setState({\n            name: event.target.value\n        })\n    }\n\n    clickHandler = () => {\n        this.props.logOut(this.props.history)\n    }\n\n    renderRooms = () => (this.state.rooms.map((room,index) => <RoomListItem key={index} index={index} room={room} wsSubscribeRoom={this.props.wsSubscribeRoom} history={this.props.history}/>))\n    renderUser = () => {\n        if (this.props.user) {\n            return (\n                // <a href=\"#\" id=\"user_badge\" className=\"nes-badge\">\n                    /* <span className=\"is-primary\"> */\n                    <>\n                        {this.props.user.username} ({this.props.user.chips})\n                    </>\n                    /* </span> */\n                // </a>\n            )\n        }\n    }\n\n    redirectToDeposits = () => {\n        this.props.history.push(`/users/${this.props.user.id}/deposit`); // should i have route to something like /users/:id/deposit??\n    }\n    \n    render () {\n        return (\n            <div id=\"rooms_component\">\n                {this.renderUser()}<br/>\n                <button className=\"nes-btn smaller-btn is-error\" id=\"test\" onClick={this.clickHandler}>Log Out</button>&nbsp;\n                <button className=\"nes-btn is-success smaller-btn\" onClick={this.redirectToDeposits}>Deposit</button><br/><br/><br/><br/>\n                {/* <div className=\"ne\"></div> */}\n                <NavLink to=\"/rooms/new\" className=\"nes-btn is-primary smaller-btn\">Create Room</NavLink><br/><br/>\n                <ul id=\"rooms_ul\">\n                    {this.renderRooms()}\n                </ul>\n                \n            </div>\n        )\n    }\n}\n\nexport default RoomsList;","import React from 'react';\n\nclass NewRoomForm extends React.Component {\n    state = {\n        name: \"\",\n        password: \"\" \n    }\n\n    changeHandler = event => {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    createRoom = () => {\n        const body = JSON.stringify(this.state)\n        const token = localStorage.getItem('token');\n        const options = {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body\n        }\n        return fetch(`http://localhost:3001/rooms`, options)\n    }\n\n    submitHandler = event => {\n        event.preventDefault();\n        this.createRoom(this.state)\n            .then(resp => resp.json())\n            .then(json => this.props.history.push(`/rooms/${json.id}`));\n    }\n\n    leaveRoom = () => {\n        this.props.history.push(`/rooms`)\n    }\n\n    render() {\n        return (\n            <div>\n                \n                <form onSubmit={this.submitHandler}>\n                    <button className=\"nes-btn is-error\" onClick={this.leaveRoom}>{'<'}</button>&nbsp;\n                    <label>\n                        Name&nbsp;\n                    <input \n                    type=\"text\" \n                    name=\"name\" \n                    className=\"nes-input\"\n                    onChange={this.changeHandler} \n                    value={this.state.name} />\n                    </label>&nbsp;\n                    <label>\n                        Password&nbsp;\n                    <input \n                    type=\"password\" \n                    name=\"password\" \n                    className=\"nes-input\"\n                    onChange={this.changeHandler} \n                    value={this.state.password} />\n                    </label>&nbsp;\n                    <button type=\"submit\" className=\"nes-btn is-primary smaller-btn\" >Create</button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default NewRoomForm;","export function djb2(str, hash){\n    for (var i = 0; i < str.length; i++) {\n      hash = ((hash << 5) + hash) + str.charCodeAt(i); /* hash * 33 + c */\n    }\n    return hash;\n  }\n  \nexport function hashStringToColor(str, hash) {\n    var hash2 = djb2(str, hash);\n    var r = (hash2 & 0xFF0000) >> 16;\n    var g = (hash2 & 0x00FF00) >> 8;\n    var b = hash2 & 0x0000FF;\n    return \"#\" + (\"0\" + r.toString(16)).substr(-2) + (\"0\" + g.toString(16)).substr(-2) + (\"0\" + b.toString(16)).substr(-2);\n}","import React from 'react';\nimport \"nes.css/css/nes.min.css\";\nimport { hashStringToColor } from '../utilities/colorHash'\n\n\nclass Chatbox extends React.Component {\n    state = {\n        newMessage: \"\"\n    }\n\n    componentDidUpdate(prevProps){\n        if (prevProps.messages !== this.props.messages) {\n            const scrollable = document.getElementById('messages_container');\n            scrollable.scrollTop = scrollable.scrollHeight;\n        }\n    }\n\n    submitHandler = event => {\n        event.preventDefault();\n        this.props.subscription.sendMessage(this.state.newMessage);\n        this.setState({ newMessage: \"\" })\n    }\n\n    changeHandler = event => {\n        this.setState({\n            newMessage: event.target.value\n        })\n    }\n\n    createNewArray = () => {\n        let i = 0\n        let j = 0\n        let bubble = {}\n        let temp = []\n        while (i < this.props.messages.length) {\n            if (this.props.messages[j+1] === undefined || this.props.messages[j].username !== this.props.messages[j+1].username) {\n                bubble[\"username\"] = this.props.messages[j].username\n                bubble[\"messages\"] = this.props.messages.slice(i, j+1)\n                temp.push(bubble)\n                bubble = {}\n                i = ++j\n            } else {\n                j++\n            }\n        }\n        return temp\n    }\n\n    renderUserAndMessage = (bubble) => {\n        if (bubble.username === this.props.user.username) {\n            return (\n                <div style={{textAlign: 'right'}}>\n                    <div className={`nes-balloon ${ bubble.username === this.props.user.username ? 'from-right' : 'from-left'} tight-balloon`}>\n                        {bubble.messages.map((message, index2) => <div key={index2}>{message.payload}<br/></div>)}\n                    </div>&nbsp;\n                    <span style={{color: `${hashStringToColor(bubble.username, this.props.colorHash)}`}}>{bubble.username}</span>\n                </div>\n            )\n        } else {\n            return (\n                <>\n                    <span style={{color: `${hashStringToColor(bubble.username, this.props.colorHash)}`}}>{bubble.username}</span>&nbsp;\n                    <div className={`nes-balloon ${ bubble.username === this.props.user.username ? 'from-right' : 'from-left'} tight-balloon`}>\n                        {bubble.messages.map((message, index2) => <div key={index2}>{message.payload}<br/></div>)}\n                    </div>\n                </>\n            )\n        }\n    }\n\n    renderMessages = () => {\n        if (this.props.messages !== undefined) {\n            return (\n                this.createNewArray().map((bubble, index) => \n                    <section key={index} className=\"message -left\">\n                        {console.log(bubble.username)}\n                        {this.renderUserAndMessage(bubble)}\n                    </section>\n            ))\n        } \n    }\n\n    render() {\n        return (\n            <div id=\"chatbox_container\" className=\"nes-container\">\n                <div id=\"messages_container\" className=\"nes-container\">\n                    <section className=\"message-list\">\n                        {this.renderMessages()}\n                    </section>\n                </div>\n                <form id=\"new_message_form\" onSubmit={this.submitHandler}>\n                    <input type=\"textarea\" id=\"textarea_field\" className=\"nes-textarea\" onChange={this.changeHandler} value={this.state.newMessage}/>\n                    <button className=\"nes-btn smaller-btn\" type=\"submit\" value=\"send\">Send</button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default Chatbox","export const colorCard = (card) => {\n    // return \"red\"\n    if (card[1] === \"d\" || card[1] === \"h\") {\n        return \"red\"\n    } else {\n        return \"black\"\n    }\n}","import React from 'react';\nimport { hashStringToColor } from '../utilities/colorHash'\nimport { colorCard } from '../utilities/colorCards'\n\nclass GameBoard extends React.Component {\n    styleCards = (cards) => {\n        const arr = cards.split(\" \");\n        console.log(arr);\n        return (\n            <>\n            {arr.map((c,index) => (<span key={index} style={{color: colorCard(c)}}>{c}&nbsp;</span>))}\n            </>\n        )\n    }\n\n    renderPlayerCards = user => {\n        if (user.playing === true) {\n            if (user.username === this.props.user.username || !this.props.round.is_playing) {\n                return (this.styleCards(user.cards))\n            } {\n                return \"Xx Xx\"\n            }\n        } else {\n            return \"*FOLD*\"\n        }\n    }\n    \n    renderDealerButton = user => {\n        if (user.dealer) {\n            return \"(D)\"\n        }\n    }\n\n    renderPlayers = () => {\n        return (\n            <>\n                {this.props.round.ordered_users.map((user,index) => \n                    <li className=\"board_user\" key={index}>\n                        <span style={{color: `${hashStringToColor(user.username, this.props.colorHash)}`}}>{user.username}\n                        </span>\n                        <span className=\"board_user_chips\">({user.chips})\n                        </span>&nbsp;\n                        {this.renderPlayerCards(user)}{this.renderDealerButton(user)}</li>)}\n            </>\n        )\n    }\n\n    renderBoardCards = () => {\n        return (this.styleCards(this.props.round.access_community_cards))\n    }\n\n    renderCardsAndPot = () => {\n        return (\n            <>\n                <div id=\"phase\">{this.props.round.access_community_cards === \"\" ? \"<PREFLOP>\" : this.renderBoardCards()}</div><br/>\n                Pot {this.props.round.pot}<br/>\n                Bet {this.props.round.highest_bet_for_phase}<br/>\n            </>\n        )\n    }\n\n    render() {\n        return(\n            <>\n                {/* Players: */}\n                <ul>\n                    {this.renderPlayers()}<br/>\n                    {this.renderCardsAndPot()}<br/>\n                </ul>\n            </>\n        )\n    }\n}\n\nexport default GameBoard;","import React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport $ from 'jquery';\nimport terminal from 'jquery.terminal';\nimport 'jquery.terminal/css/jquery.terminal.css';\nimport { postMoveWithToken, startNewRound } from '../utilities/fetchWithToken';\n\n\nclass GameConsole extends React.Component {\n    componentDidMount() {\n        const div = findDOMNode(this.refs.jterminal);\n        const scrollable = document.getElementById('console');\n        const gameId = this.props.gameId\n        const userId = this.props.userId\n        terminal(window, $);\n        this.term = $(div).terminal([\n            {\n                start: function(){\n                    startNewRound(gameId);\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                },\n                fold: function(){\n                    postMoveWithToken({ command: 'fold' }, userId);\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                },\n                check: function() {\n                    postMoveWithToken({ command: 'check' }, userId)\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                },\n                call: function() {\n                    postMoveWithToken({ command: 'call' }, userId)\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                },\n                raise: function(x) {\n                    postMoveWithToken({ command: 'raise', amount: x }, userId)\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                },\n                allin: function() {\n                    postMoveWithToken({ command: 'allin' }, userId)\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                },\n                help: function() {\n                    this.echo('Available Commands: fold | check | call | raise <amount> | allin | start')\n                    scrollable.scrollTop = scrollable.scrollHeight;\n                }\n    \n            },\n        (cmd, t) => {\n            t.echo('Invalid Command: help for options');\n            scrollable.scrollTop = scrollable.scrollHeight;\n        }\n    ], {\n            greetings: 'Game Terminal:'\n        })\n        // if (this.props.playing) {this.props.status.forEach(s => this.term.echo(s))}\n        this.props.status.forEach(s => this.term.echo(s))\n    }\n\n    shouldComponentUpdate(nextProps) {\n        \n\n        if (this.props.roundId !== nextProps.roundId) {\n            nextProps.status.forEach(s => this.term.echo(s));\n        } else if (nextProps.gameErrors) {\n            this.term.echo(nextProps.gameErrors);\n            this.props.clearGameErrors();\n        } {\n            const newStatusMessages = nextProps.status.slice(this.props.status.length)\n            newStatusMessages.forEach(s => this.term.echo(s))\n        }\n\n        const div = document.getElementById('console');\n        div.scrollTop = div.scrollHeight;\n\n        return false;\n    }\n\n\n\n    render(){\n        return (\n            <div id=\"console\">\n                <div ref=\"jterminal\" id=\"jterminal\">\n                </div> \n            </div>\n        )\n    }\n}\n\nexport default GameConsole","import React from 'react';\nimport GameBoard from './GameBoard';\nimport GameConsole from './GameConsole'\nimport { connect } from 'react-redux';\nimport { startGame, subscribeGame, unsubscribeGame, clearGameErrors } from '../redux/gameActions';\n\nclass Game extends React.Component {\n    componentDidMount() {\n        this.props.subscribeGame(this.props.gameId);\n    }\n\n    componentWillUnmount(){\n        this.props.unsubscribeGame(this.props.gameId);\n    }\n\n    startGame = () => {\n        this.props.clearGameErrors();\n        this.props.startGame(this.props.game.id); //this action needs to rebroadcast to everyone streaming from room\n    }\n\n    renderButton = () => {\n        if (!this.props.game.active_round) {\n            console.log(this.props.players > 1);\n            return <button className={`nes-btn ${this.props.players > 1 ? 'is-primary' : 'is-disabled'}`} onClick={this.startGame}>Start Game</button>\n        }\n    }\n\n    renderGame = () => {\n        if (this.props.game.active_round && this.props.user) {\n            console.log(this.props.game);\n            console.log(this.props.game.active_round.status)\n            return (\n                <>\n                    <GameBoard round={this.props.game.active_round} user={this.props.user} colorHash={this.props.colorHash}/>\n                    <GameConsole \n                        gameId={this.props.game.id}\n                        user={this.props.user}\n                        roundId={this.props.game.active_round.id} \n                        playing={this.props.game.active_round.is_playing}\n                        status={this.props.game.active_round.status} \n                        gameErrors={this.props.gameErrors}\n                        clearGameErrors={this.props.clearGameErrors}/>\n                </>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div id=\"game_container\">\n                {this.renderGame()}\n                {this.renderButton()}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        game: state.game,\n        user: state.user,\n        gameErrors: state.gameErrors\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        startGame: roomId => dispatch(startGame(roomId)),\n        subscribeGame: gameId => dispatch(subscribeGame(gameId)),\n        unsubscribeGame: gameId => dispatch(unsubscribeGame(gameId)),\n        clearGameErrors: () => dispatch(clearGameErrors())\n    }\n}\n// export default Game;\nexport default connect(mapStateToProps, mapDispatchToProps)(Game);","import {fetchWithToken} from '../utilities/fetchWithToken'\n\nexport const startGame = gameId => {\n    return dispatch => {\n        const options = {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }\n        fetchWithToken(`http://localhost:3001/games/${gameId}/start`, options )\n            .then(resp => resp.json())\n            .then(json => {\n                console.log(json);\n                // set game\n                // set status\n                dispatch({ type: 'SET_GAME', game: json })\n            })\n    }\n}\n\n\nexport function subscribeGame(gameId) {\n    return {\n      channel: 'GameChannel',\n      game: `${gameId}`\n    }\n}\n\nexport function unsubscribeGame(gameId) {\n    return {\n      channel: 'GameChannel',\n      game: `${gameId}`,\n      leave: true\n    }\n}   \n\nexport function clearGameErrors() {\n    return {\n        type: 'CLEAR_GAME_ERRORS'\n    }\n}","import React from 'react';\nimport Chatbox from './Chatbox';\nimport Game from './Game';\nimport { connect } from 'react-redux';\nimport { subscribeRoom, unsubscribeRoom } from '../redux/roomActions';\nimport { hashStringToColor } from '../utilities/colorHash'\n\nclass Room extends React.Component {\n    state = {\n        newMessage: \"\"\n    }\n    hash = Math.floor(1000 + Math.random() * 9000);\n\n    componentDidMount() {\n        this.subscription = this.props.subscribeRoom(this.props.match.params.id);\n    }\n\n    componentWillUnmount() {\n        this.props.unsubscribeRoom(this.props.match.params.id);\n    }\n\n    leaveRoom = () => {\n        this.props.history.push(`/rooms`);\n    }\n\n    renderRoom(){\n        if (this.props.room !== undefined) {\n            return (\n                <>\n                    <div>\n                    <button className=\"nes-btn is-error\" onClick={this.leaveRoom}>{'<'}</button><br/><br/>\n                    {this.props.room.name} \n                    </div>\n                    <ul id=\"user_list\">\n                        {this.props.room.users.map((user, index) => <li className=\"user_item\" style={{color: `${hashStringToColor(user.username, this.hash)}`}} key={index}>{user.username} </li>)}\n                    </ul>\n                </>\n            )\n        }\n    }\n\n\n    renderGameComp = () => {\n        if (this.props.room) {\n            return (<Game gameId={this.props.room.game.id} players={this.props.room.no_users} colorHash={this.hash}/>)\n        }\n    }\n\n    render(){\n        return(\n            // <div id=\"room_container\">\n            <div>\n                {this.renderRoom()}\n                <Chatbox user={this.props.user} messages={this.props.messages} subscription={this.subscription} colorHash={this.hash}/>\n                {this.renderGameComp()}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        room: state.room,\n        user: state.user,\n        messages: state.messages\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        subscribeRoom: roomId => dispatch(subscribeRoom(roomId)),\n        unsubscribeRoom: roomId => dispatch(unsubscribeRoom(roomId))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Room);","export function subscribeRoom(roomId) {\n    return {\n      channel: 'RoomChannel',\n      room: `${roomId}`\n    //   received: NEW_MESSAGE,\n    }\n  }\n  \n  export function unsubscribeRoom(roomId) {\n    return {\n      channel: 'RoomChannel',\n      room: `${roomId}`,\n      leave: true,\n    }\n  }\n  \n","import handleAuthRedirect from './handleAuthRedirect';\nimport { fetchWithToken } from '../utilities/fetchWithToken';\n\nconst authenticate_user = (state, history, dispatch) => { // abstracted this out because I also need in my register action\n    const body = JSON.stringify(state)\n    const options = {\n        method: \"POST\",\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body\n    }\n    dispatch({type: 'AUTH_REQUEST'})\n    fetch(`http://localhost:3001/authenticate`, options)\n        .then(resp => resp.json())\n        .then(json => {\n            console.log(\"in loginUser action\", json);\n            if (json.user) {\n                dispatch({type: 'AUTH_SUCCESS', user: json.user})\n                localStorage.setItem(\"token\", json.auth_token);\n                history.push(`/rooms`);\n            } else if (json.errors) {\n                dispatch({type: 'AUTH_FAIL'});\n                dispatch({type: 'ADD_ERRORS', errors: json.errors })\n            }\n        })\n}\n\nexport const loginUser = (state, history) => {\n    return dispatch => {\n        authenticate_user(state, history, dispatch)\n    }\n}\n\nexport const setLogin = history => {\n    return dispatch => {\n        const token = localStorage.getItem(\"token\");\n        console.log('in setlogin');\n        if (token) {\n            dispatch({type: 'AUTH_REQUEST'});\n            fetch(`http://localhost:3001/set_login`, {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n                .then(resp => resp.json())\n                .then(json => {\n                    console.log(\"in setLogin action\", json);\n                    if (json.user) {\n                        dispatch({type: 'AUTH_SUCCESS', user: json.user})\n                        \n                        handleAuthRedirect(true, history);  // created function to control for different routes for redirects\n                    } else if (json.error) {\n                        dispatch({type: 'AUTH_FAIL'});\n                        handleAuthRedirect(false, history);\n                    }\n                })\n        } else {\n            handleAuthRedirect(false, history)\n        }\n    }\n}\n\nexport const logOut = history => {\n    // I don't need to send anything to database.\n    return dispatch => {\n        localStorage.clear();\n        dispatch({type: 'LOGOUT'})\n        history.push(`/login`);\n    }\n}\n\nexport const clearErrors = () => {\n    return dispatch => {\n        dispatch({type: 'CLEAR_ERRORS'});\n    }\n}\n\nexport const register = (state, history) => {\n    return dispatch => {\n        const body = JSON.stringify(state);\n        const options = {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body\n        }\n        fetch(`http://localhost:3001/users`, options)\n            .then(resp => resp.json())\n            .then(json => {\n                console.log(\"in register action \", json);\n                if (json.user) {\n                    authenticate_user(state, history, dispatch);\n                } else {\n                    dispatch({type: 'ADD_ERRORS', errors: json.errors })\n                }\n            })\n    }\n}\n\nexport const addChips = (amount, userId) => {\n    return dispatch => {\n        const body = JSON.stringify({ amount })\n        const options = {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body\n        }\n        fetchWithToken(`http://localhost:3001/users/${userId}/add_chips`, options)\n            .then(resp => resp.json())\n            .then(json => {\n                console.log(json)\n                dispatch({ type: 'SET_CHIPS', chips: json.chips })\n            });\n    }\n}\n\nexport const fetchChips = userId => {\n    return dispatch => {\n        fetchWithToken(`http://localhost:3001/users/${userId}/get_chips`)\n            .then(resp => resp.json())\n            .then(json => {\n                console.log(json)\n                dispatch({ type: 'SET_CHIPS', chips: json.chips })\n            })\n    }\n}\n\nexport const unsetChips = () => ({ type: 'UNSET_CHIPS' })","import React from 'react';\nimport { connect } from 'react-redux';\nimport { clearErrors } from '../redux/dispatchActions';\n\nclass Errors extends React.Component {\n    componentWillUnmount(){\n        this.props.clearErrors();\n    }\n\n    render(){\n        return(\n            <div>\n                {this.props.errors}\n            </div> \n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return { errors: state.errors }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return { clearErrors: () => dispatch(clearErrors())}\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Errors);","import React from 'react';\nimport { loginUser } from '../redux/dispatchActions';\nimport { connect } from 'react-redux';\nimport Errors from './Errors';\nimport { Link } from 'react-router-dom';\n\nclass LoginForm extends React.Component {\n    state = {\n        email: \"\",\n        password: \"\"\n    }\n\n    changeHandler = event => {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    submitHandler =  event => {\n        event.preventDefault();\n        console.log(this.state);\n        this.props.loginUser(this.state, this.props.history)\n    }\n\n    renderRegister = () => {\n        return (\n            <>\n                Don't have an account? <Link to=\"/register\">Register!</Link>\n            </>\n        )\n    }\n    render() {\n        return(\n            <div className=\"user_form\">\n                <Errors />\n                <form onSubmit={this.submitHandler}>\n                    <label>\n                        Email&nbsp;\n                    <input className=\"nes-input\" onChange={this.changeHandler} type=\"text\" name=\"email\" value={this.state.email}/>\n                    </label><br/>\n                    <label>\n                        Password&nbsp;\n                    <input className=\"nes-input\" onChange={this.changeHandler} type=\"password\" name=\"password\" value={this.state.password}/>\n                    </label><br/>\n                    <button className=\"nes-btn\" type=\"submit\" value=\"login\">Log In</button><br/>\n                    {this.renderRegister()}\n                    <p>Log In via <Link to=\"/auth/google_oauth2\">Google</Link></p>\n                </form>\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        loginUser: (state, history) => dispatch(loginUser(state, history))\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(LoginForm);","import React from 'react';\nimport Errors from './Errors';\n\nclass Register extends React.Component {\n    state = {\n        username: \"\",\n        password: \"\",\n        password_confirmation: \"\",\n        email: \"\"\n    }\n\n    changeHandler = event => {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    submitHandler = event => {\n        event.preventDefault();\n        this.props.register(this.state, this.props.history);\n    }\n\n    render() {\n        return (\n            <div className=\"user_form\">\n                <Errors />\n                <form onSubmit={this.submitHandler} >\n                    <label>\n                        Username\n                    <input type=\"text\" name=\"username\" value={this.state.username} onChange={this.changeHandler}/>\n                    </label><br/>\n                    <label>\n                        Email\n                    <input type=\"text\" name=\"email\" value={this.state.email} onChange={this.changeHandler}/>\n                    </label><br/>\n                    <label>\n                        Password\n                    <input type=\"password\" name=\"password\" value={this.state.password} onChange={this.changeHandler}/>\n                    </label><br/>\n                    <label>\n                        Password Confirmation\n                    <input type=\"password\" name=\"password_confirmation\" value={this.state.password_confirmation} onChange={this.changeHandler}/>\n                    </label><br/>\n                    <input type=\"submit\" value=\"Create Account\"/><br/>\n                </form>\n            </div>\n        )\n    }\n\n}\n\nexport default Register;","import React from 'react';\n// import CheckoutForm from './Checkout'\nimport { useStripe, useElements, CardElement, CardNumberElement, CardExpiryElement, CardCvcElement } from '@stripe/react-stripe-js';\nimport '../fonts/stylesheet.css';\nimport '../CardSectionStyles.css'\n\nconst CARD_ELEMENT_OPTIONS = {\n    style: {\n      base: {\n        color: \"#32325d\",\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n        // fontFamily: 'Times New Roman',\n        // fontFamily: \"atari_classicchunky\",\n        // fontFamily: 'Times New Roman',\n        // fontFamily: 'Atari',\n        fontSmoothing: \"antialiased\",\n        fontSize: \"16px\",\n        \"::placeholder\": {\n          color: \"#aab7c4\",\n        },\n      },\n      invalid: {\n        color: \"#fa755a\",\n        iconColor: \"#fa755a\",\n      },\n    },\n  };\n\nconst CheckoutForm = props => {\n    const stripe = useStripe();\n    const elements = useElements();\n    const validateAmount = amount => {\n      const cents = parseFloat(amount.replace(/,/g, ''))*100\n      if (cents >= 50 || cents <= 99999999){\n        return true\n      }\n      return false\n    }\n\n    const submitHandler = async (event) => {\n        event.preventDefault();\n        props.clearMessages();\n\n        if (!stripe || !elements) {\n            // Stripe.js has not yet loaded.\n            // Make sure to disable form submission until Stripe.js has loaded.\n            return;\n        }\n\n        // console.log(props.amount);\n        const cents = parseFloat(props.amount.replace(/,/g, ''))*100\n        // console.log(parseFloat(props.amount.replace(/,/g, '')))\n        // console.log(cents);\n        const resp = await fetch(`http://localhost:3001/secret/${cents}`)\n        const secret = await resp.json()\n        // console.log(secret);\n        // console.log(secret);\n        console.log(props.name);\n        const result = await stripe.confirmCardPayment(secret.client_secret, {\n        payment_method: {\n            card: elements.getElement(CardElement),\n            billing_details: {\n            name: props.name,\n            },\n        }\n        });\n    \n        if (result.error) {\n        // Show error to your customer (e.g., insufficient funds)\n        console.log(result.error.message);\n        props.handleErrors(result.error.message);\n        } else {\n        // The payment has been processed!\n        if (result.paymentIntent.status === 'succeeded') {\n          console.log(result.paymentIntent.amount);\n          props.addChips(result.paymentIntent.amount*100, props.user.id)\n            // Show a success message to your customer\n            // There's a risk of the customer closing the window before callback\n            // execution. Set up a webhook or plugin to listen for the\n            // payment_intent.succeeded event that handles any business critical\n            // post-payment actions.\n          props.handleSuccess();\n          console.log(\"PAYMENT SUCCESS\");\n            // send post request to add chips to person's account.\n        }\n        }\n    }\n    \n    return(\n        <div>\n            <form onSubmit={submitHandler}>\n              <CardElement options={CARD_ELEMENT_OPTIONS}/>\n              {/* <CardElement classes={{base: 'nes-input'}}/> */}\n              <br/>\n                <button\n                // validates the stripe is loaded, name is not empty, and amount is valid, otherwise button is disabled.\n                  className={`nes-btn ${!stripe || props.name === \"\" || !validateAmount(props.amount) ? 'is-disabled' : 'is-primary'}`} \n                  type=\"submit\" \n                  onClick={submitHandler}\n                  value=\"Exchange Chips!\">\n                    Exchange Chips!\n                </button>\n            </form>\n        </div>\n    )\n    \n}\n\nexport default CheckoutForm;","import React from 'react';\nimport CheckoutForm from './CheckoutForm'\nimport CurrencyInput from 'react-currency-input';\nimport { connect } from 'react-redux';\nimport { addChips, fetchChips, unsetChips } from '../redux/dispatchActions';\n// import { fetchWithToken } from '../utilities/fetchWithToken';\n\nclass CheckoutContainer extends React.Component{\n    state = {\n        amount: \"\",\n        amountError: \"\",\n        name: \"\",\n        error: \"\",\n        success: \"\"\n    }\n\n    componentDidMount() {\n        this.props.fetchChips();\n    }\n\n    componentWillUnmount(){\n        this.props.unsetChips();\n    }\n\n    changeHandler = event => {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    handleAmountChange = event => {\n        this.setState({\n            amount: event.target.value\n        })\n        this.validateAmount();\n    }\n\n    validateAmount = () => {\n        const cents = parseFloat(this.state.amount.replace(/,/g, ''))*100\n        if (cents < 50 ) {\n            this.setState({\n                amountError: 'Amount must be at least .50'\n            })\n        } else if (cents > 99999999) {\n            this.setState({\n                amountError: 'Amount must be no more than 999,999.99'\n            })\n        } else {\n            this.setState({\n                amountError: null\n            })\n        }\n    }\n\n    renderUser = () => {\n        if (this.props.user) {\n            return (\n                <>\n                    {this.props.user.username} ({this.props.chips})\n                </>\n            )\n        }\n    }\n\n    handleErrors = error => {\n        this.setState({\n            error: error\n        })\n\n    }\n\n    renderErrors = () => {\n        if (this.state.error) {\n            return (\n                <span className=\"nes-text is-error\">\n                    {this.state.error}<br/>\n                </span>\n            )\n        }\n    }\n\n    handleSuccess = () => {\n        this.setState({\n            success: \"Deposit Successful!\"\n        })\n    }\n\n    renderSuccess = () => {\n        if (this.state.success) {\n            return(\n                <span className=\"nes-text is-success\">\n                    {this.state.success}<br/>\n                </span>\n            )\n        }\n    }\n\n    clearMessages = () => {\n        this.setState({\n            success: \"\",\n            error: \"\"\n        })\n    }\n\n    goBack = () => {\n        this.props.history.push(`/rooms`)\n    }\n\n    render(){\n        return(\n            <div id=\"checkout_form\">\n                <button className=\"nes-btn is-error\" onClick={this.goBack}>{'<'}</button><br/><br/>\n                {this.renderUser()}<br/><br/>\n                {/* {this.props.user.username} ({this.props.chips})<br/><br/> */}\n\n                {this.renderErrors()}\n                {this.renderSuccess()}\n\n                1 USD = 10000 Chips<br/>\n                <label> \n                    {/* input must be at least .50 */}\n                    {/* amount must be no more than 999,999.99 */}\n                    <CurrencyInput \n                    className={`nes-input ${this.state.amountError ? 'is-error' : ''}`} \n                    name=\"amount\" \n                    value={this.state.amount} \n                    onChangeEvent={this.handleAmountChange}\n                    onBlur={this.validateAmount}\n                    />\n                </label><br/>\n                <div className=\"nes-text is-error\">{this.state.amountError}</div>\n                <br/>\n\n                <div>\n                    <label>\n                        {/* name must not be blank. */}\n                        <span className=\"label\">Full Name *</span><br/>\n                        <input \n                        className=\"nes-input\" \n                        placeholder=\"Pacman\"\n                        type=\"text\" \n                        name=\"name\" \n                        value={this.state.name} \n                        onChange={this.changeHandler}/>\n                    </label><br/>\n                    <label>\n                        <span className=\"label\">Card Details</span><br/>\n                    <CheckoutForm \n                    \n                        clearMessages={this.clearMessages}\n                        handleErrors={this.handleErrors} \n                        handleSuccess={this.handleSuccess}\n                        amount={this.state.amount} \n                        name={this.state.name} \n                        user={this.props.user} \n                        addChips={this.props.addChips}/>\n                    </label>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        chips: state.chips\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchChips: userId => dispatch(fetchChips(userId)),\n        addChips: (amount, userId) => dispatch(addChips(amount, userId)),\n        unsetChips: () => dispatch(unsetChips())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutContainer);","import React from 'react';\nimport Home from './Home';\nimport RoomsList from './RoomsList';\nimport NewRoomForm from './NewRoomForm';\nimport Room from './Room';\nimport { connect } from 'react-redux';\nimport { setLogin, logOut, register } from '../redux/dispatchActions';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport LoginForm from './LoginForm';\nimport Register from './Register';\nimport CheckoutContainer from './CheckoutContainer';\n\nclass App extends React.Component {\n  \n\n  render() {\n    return (\n      <div id=\"main\">\n      <Router>\n        {console.log(this.props.user)}\n        <Route path=\"/\" render={routerProps => <Home {...routerProps} isLoggedin={this.props.isLoggedIn} setLogin={this.props.setLogin}/>}/>\n        \n        <Switch>\n          <Route path=\"/users/:id/deposit\" render={routerProps => <CheckoutContainer {...routerProps} user={this.props.user}/>}/> \n          <Route path=\"/login\" render={routerProps => <LoginForm {...routerProps}/>}/>\n          <Route path=\"/rooms/new\" render={routerProps => \n            <NewRoomForm \n              {...routerProps}\n              />}/>\n\n          <Route path={`/rooms/:id`} render={routerProps => \n            <Room {...routerProps}/>}/>\n          <Route path=\"/rooms\" render={routerProps => \n            <RoomsList {...routerProps}\n              user={this.props.user} \n              logOut={this.props.logOut} \n              isLoggedIn={this.props.isLoggedIn}\n              />}/>\n\n          <Route path=\"/register\" render={routerProps => <Register {...routerProps} register={this.props.register}/>}/>\n        </Switch>\n      </Router>\n      </div>\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    register: (state,history) => dispatch(register(state,history)),\n    setLogin: history => dispatch(setLogin(history)),\n    logOut: history => dispatch(logOut(history)),\n    // createRoom: state => dispatch(createRoom(state))\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isLoggedIn: state.isLoggedIn,\n    user: state.user\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from './redux/reducer';\nimport './fonts/stylesheet.css';\nimport cableMiddleware from './redux/cableMiddleware';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\n\n// const store = createStore(reducer, applyMiddleware(thunk, cableMiddleware))\nconst store = createStore(reducer, applyMiddleware(cableMiddleware(), thunk))\nconst stripePromise = loadStripe(\"pk_test_51GqNn2Kj8jVe4aIu3gu8fP0a3Y8ltGdN66FAP1vq1K2jt3PUvI9STlO8JrGOXAr3DQBx1FRNCZ7Ye5KByzTu7Hmx00LAxaeYGP\");\n\nwindow.store = store;\n\n// const fonts = [\n//   {\n//     src: (\"https://db.onlinewebfonts.com/t/1481ee4d30d9e1d35c84e09e69e14e92.woff\"),\n//     family: \"Atari\",\n//     style: \"normal\"\n//   }\n// ]\n\nReactDOM.render(\n  <Provider store={store}>\n    <Elements stripe={stripePromise}>\n    {/* <Elements stripe={stripePromise} options={{fonts: fonts}}> */}\n      <App />\n    </Elements>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","export default function resourceReducer (state = {\n    processingAuth: false,\n    isLoggedIn: false,\n    user: undefined,\n    errors: [],\n    room: undefined,\n    messages: [],\n    game: {},\n    gameErrors: undefined, //this will be used by gameboard\n    // status: [] //this will be used by gameconsole, I need them separate becaue I don't want the console to\n    chips: undefined\n}, action\n) {\nswitch (action.type) {\n    //auth\n    case 'AUTH_REQUEST':\n        return {\n            ...state,\n            processingAuth: true\n        }\n    case 'AUTH_FAIL':\n        return {\n            ...state,\n            processingAuth: false,\n            isLoggedIn: false,\n            user: {}\n        }\n    case 'AUTH_SUCCESS':\n        return {\n            ...state,\n            processingAuth: false,\n            isLoggedIn: true,\n            user: action.user\n        }\n    case 'LOGOUT':\n        return {\n            ...state,\n            isLoggedIn: false,\n            user: {}\n        }\n    case 'ADD_ERRORS':\n        return {\n            ...state,\n            errors: action.errors\n        }\n    case 'CLEAR_ERRORS':\n        return {\n            ...state,\n            errors: []\n        }\n    case 'SET_ROOM':\n        return {\n            ...state,\n            room: action.room\n        }\n    case 'DELETE_ROOM':\n        return {\n            ...state,\n            room: undefined\n        }\n    case 'NEW_MESSAGE':\n        return {\n            ...state,\n            messages: [...state.messages, action.message]\n        }\n    case 'CLEAR_MESSAGES':\n        return {\n            ...state,\n            messages: []\n        }\n    case 'SET_GAME':\n        return {\n            ...state,\n            game: action.game\n        }\n    case 'DELETE_GAME':\n        return {\n            ...state,\n            game: {}\n        }\n    case 'UPDATE_ROUND':\n        console.log({\n            ...state,\n            game: {\n                ...state.game,\n                active_round: action.round\n            }\n        })\n        return {\n            ...state,\n            game: {\n                ...state.game,\n                active_round: action.round\n            }\n        }\n    case 'GAME_ERRORS':\n        return {\n            ...state,\n            gameErrors: action.error\n        }\n    case 'CLEAR_GAME_ERRORS':\n        return {\n            ...state,\n            gameErrors: undefined\n        }\n\n    case 'SET_CHIPS': // only for use on deposit page.\n        return {\n            ...state,\n            chips: action.chips\n\n        }\n    case 'UNSET_CHIPS':\n        return {\n            ...state,\n            chips: undefined\n        }\n    default:\n        return state;\n}\n}","import ActionCable from 'actioncable';\n\nexport default function cableMiddleware() {\n  // const cable = ActionCable.createConsumer(`ws://127.0.0.1:3001/cable?token=${localStorage.getItem('token')}`);\n  const cable = ActionCable.createConsumer(`ws://127.0.0.1:3001/cable`);\n\n  return ({ dispatch, getState }) => next => (action) => {\n    if (typeof(action) === 'function') {\n      return next(action)\n    }\n\n    const {\n      channel,\n      room,\n      game,\n      leave\n    } = action;\n    const token = localStorage.getItem('token')\n    const identifier = Object.assign({}, action, { token } )\n\n    if (!channel) {\n      return next(action);\n    }\n\n    if (room) {\n      if(leave) {\n        const subscription = cable.subscriptions.subscriptions.find(sub => sub.identifier === JSON.stringify({ channel, room, token }))\n        cable.subscriptions.remove(subscription);\n        dispatch({ type: 'DELETE_ROOM' })\n        dispatch({ type: 'CLEAR_MESSAGES' })\n        return;\n      }\n\n      const received = result => {\n        console.log(result)\n        switch (result.type) {\n            case 'current_room':\n              dispatch({ type: 'SET_ROOM', room: result.room });\n              break;\n            case 'new_message':\n              dispatch({ type: 'NEW_MESSAGE', message: result.message });\n              break;\n            default:\n              break;\n        }\n      }\n\n      const sendMessage = function(message) {\n          this.perform('create_message', {\n              content: message\n          });\n      }\n\n      return cable.subscriptions.create( identifier, { received, sendMessage });\n    }\n\n    if (game) { // game subscription.\n      if(leave) {\n        const subscription = cable.subscriptions.subscriptions.find(sub => sub.identifier === JSON.stringify({ channel, game, token }))\n        cable.subscriptions.remove(subscription);\n        dispatch({ type: 'DELETE_GAME' })\n        return;\n      }\n\n      const received = result => {\n        console.log(result);\n        switch (result.type) {\n          case 'set_game':\n            dispatch({ type: 'SET_GAME', game: result.game });\n            break;\n          case 'update_round':\n            dispatch({type: 'UPDATE_ROUND', round: result.round })\n            break;\n          case 'errors':\n            dispatch({type: 'GAME_ERRORS', error: result.error })\n            break;\n          default:\n            break;\n        }\n      }\n\n      return cable.subscriptions.create( identifier, { received });\n    }\n  };\n}"],"sourceRoot":""}